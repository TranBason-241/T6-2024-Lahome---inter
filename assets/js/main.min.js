$(document).ready(function () {
  //Change Page
  btnViewMainContent = document.querySelector(".btn-click-to-detail");
  cover = document.querySelector(".cover");
  mainContent = document.querySelector(".main-content");
  btnViewMainContent.addEventListener("click", () => {
    cover.classList.add("d-none");
    mainContent.classList.remove("d-none");
  });

  ///Change Page

  // changePage = (targetPageId) => {
  //   currentPage = document.querySelector(".page.page-show");
  //   targetPage = document.querySelector(`.page-${targetPageId}`);
  //   // Hide current page
  //   currentPage.classList.remove("page-show");
  //   // currentPage.classList.remove("my-fade-in");
  //   // show target page
  //   targetPage.classList.add("page-show");
  //   // targetPage.classList.add("my-fade-in");
  // };

  // Nav click
  // listNavItems = document.querySelectorAll(".nav-item");
  // listNavItems.forEach((navItem) => {
  //   navItem.addEventListener("click", () => {
  //     //Chage Nav active
  //     currentNav = document.querySelector(".active-nav");
  //     targetNav = event.target;

  //     if (currentNav != targetNav) {
  //       currentNav.classList.remove("active-nav");
  //       targetNav.classList.add("active-nav");

  //       targetPageId = targetNav.getAttribute("value");
  //       changePage(targetPageId);
  //     }
  //   });
  // });

  // Thêm bộ lắng nghe sự kiện 'wheel' vào phần tử
  // readyChange = true;
  // window.addEventListener("wheel", function (event) {
  //   if (readyChange) {
  //     readyChange = false;
  //     currentNav = document.querySelector(".active-nav");
  //     if (event.deltaY < 0) {
  //       console.log("Lăn chuột lên");
  //       if (currentNav.getAttribute("value") > 1) {
  //         currentNav.previousElementSibling.click();
  //       } else {
  //         console.log("is page 1");
  //       }
  //     } else if (event.deltaY > 0) {
  //       console.log("Lăn chuột xuống");
  //       if (currentNav.getAttribute("value") < 6) {
  //         currentNav.nextElementSibling.click();
  //       } else {
  //         console.log("is last");
  //       }
  //     }
  //     setTimeout(() => {
  //       readyChange = true;
  //     }, 500);
  //   }
  // });

  //Mian swiper

  var swiper = new Swiper(".mySwiper", {
    direction: "vertical",
    speed: 800,
    mousewheel: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    initialSlide: 2,
  });

  //// Modal type 1

  ///Fake div map

  fakeDivs = document.querySelectorAll(".fake-div");
  fakeDivs.forEach((fakeDiv) => {
    fakeDiv.addEventListener("mouseover", () => {
      markDiv = fakeDiv.previousElementSibling;
      textDiv = fakeDiv.nextElementSibling;
      textDiv.classList.add("show-item");
      markDiv.classList.add("show-item");
    });

    fakeDiv.addEventListener("mouseout", () => {
      markDiv = fakeDiv.previousElementSibling;
      textDiv = fakeDiv.nextElementSibling;
      textDiv.classList.remove("show-item");
      markDiv.classList.remove("show-item");
    });

    fakeDiv.addEventListener("click", () => {
      showModal(event.target);
    });
  });
  var slide_for_page_3;
  var slide_for_page_5;
  var myModalType_1 = new bootstrap.Modal(document.getElementById("modal-type-1"), {});

  $("#modal-type-1").on("hidden.bs.modal", function (e) {
    console.log("Modal is closed");
    // slide_for_page_3.destroy();
  });

  showModal = (markClick) => {
    //Check là của page nào. Vì có 2 page dùng type slide này
    // sau đó check active sldie nai

    slideIndex = parseInt(markClick.getAttribute("indexSlide"), 10);
    // slideIndex = slideIndex - 1;
    console.log(slideIndex);
    myModalType_1.show();
    targetSlide = markClick.closest(".page");
    // console.log(targetSlide.getAttribute("id"));
    if (targetSlide.getAttribute("id") == "p-3") {
      //Ẩn slide đang show
      CurrentSlideShow = document.querySelector(".slide-type-1-container.show");
      if (CurrentSlideShow) {
        CurrentSlideShow.classList.remove("show");
      }
      //show target page
      targetSlideShow = document.querySelector('[forPage="3"]');
      targetSlideShow.classList.add("show");

      if (!slide_for_page_3) {
        setTimeout(() => {
          slide_for_page_3 = new Swiper(".slide-page-3 .swiper-type-1", {
            slidesPerView: 1,
            spaceBetween: 30,
            loop: false,
            pagination: {
              el: ".slide-page-3 .swiper-pagination",
              // clickable: true,
            },
            navigation: {
              nextEl: ".slide-page-3 .swiper-button-next",
              prevEl: ".slide-page-3 .swiper-button-prev",
            },
            // initialSlide: slideIndex,
          });
        }, 300);
      }
      setTimeout(() => {
        slide_for_page_3.slideTo(slideIndex);
      }, 300);
    } else if (targetSlide.getAttribute("id") == "p-5") {
      //Ẩn slide đang show
      CurrentSlideShow = document.querySelector(".slide-type-1-container.show");
      if (CurrentSlideShow) {
        CurrentSlideShow.classList.remove("show");
      }
      //show target page
      targetSlideShow = document.querySelector('[forPage="5"]');
      targetSlideShow.classList.add("show");

      if (!slide_for_page_5) {
        setTimeout(() => {
          slide_for_page_5 = new Swiper(".slide-page-5 .swiper-type-1", {
            slidesPerView: 1,
            spaceBetween: 30,
            loop: false,
            pagination: {
              el: ".slide-page-5 .swiper-pagination",
              clickable: true,
            },
            navigation: {
              nextEl: ".slide-page-5 .swiper-button-next",
              prevEl: ".slide-page-5 .swiper-button-prev",
            },
          });
        }, 500);
      }
      setTimeout(() => {
        slide_for_page_5.slideTo(slideIndex);
      }, 500);
    }
  };
});

// write function convert string to number

// write function change background when click on button has id = "haha"
